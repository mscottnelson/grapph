html
  head
    include ./includes/bootstrap.jade
    include ./includes/googleMapsApi.jade
    script(src="/jspm_packages/system.js")
    script(src="/config.js")
    script System.import('d3')
    script System.import('app-angular')
    /*script System.import("/visualization/wGraph.js")*/
    link(href='/visualization/chart.css', rel='stylesheet')
    style
      | body { padding-top: 70px; }
    block title
      title Hello world!

    .container
      .well
        block body
  body
    nav.navbar.navbar-default.navbar-fixed-top
      .container
        .navbar-header
          a.navbar-brand(href="#") Grapph
        .collapse.navbar-collapse.navbar-right
          if !isAuthenticated()
            ul.nav.navbar-nav
              li.nav.navbar-nav
                a(href='/users/login') Sign In
              li.nav.navbar-nav
                a(href='/users/register') Register
          else
            ul.nav.navbar-nav.navbar-right
              li.nav.navbar-nav
                a(href='/users/logout') Logout
            p.navbar-text.navbar-right
              | Hello #{user.username}!
    //-
    //-   style.
    //-     #chart svg {
    //-     height: 400px;
    //-     }
    //-   #chart
    //-     svg
    if isAuthenticated()
      div(ng-controller="WeightChartController")
        div(linear-chart chart-data="weightData")

      div(ng-controller="WeightListController as vm")
        input(ng-model="newWeight" type="text")
        button(ng-click="vm.addWeight(newWeight)") ADD
        hr
        label Basic Weight List for #{user.username}:
        ul
          li(ng-repeat="weight in vm.weightList | filter: { } track by $index")
            | {{ weight.weight }} - {{ weight.createdAt | date:'shortDate' }}

  block footer
        if user
          .row
            .col-md-12
              .pull-right
                small You are signed in as #{user.username}!
                a(href="/users/logout")  Logout.
